{"ast":null,"code":"import _objectSpread from\"C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import Button from'./Button';import usePost from\"../hooks/usePost\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var headerCallback=_ref.headerCallback;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginError=_useState2[0],setLoginError=_useState2[1];var _useState3=useState({username:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),credentials=_useState4[0],setCredentials=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),usernameError=_useState6[0],setUsernameError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var _usePost=usePost(\"login\",credentials),_usePost2=_slicedToArray(_usePost,3),res=_usePost2[0],login=_usePost2[1],err=_usePost2[2];function handleUsername(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},{username:e.target.value}));setUsernameError(e.target.value.trim()===\"\");}function handlePassword(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},{password:e.target.value}));setPasswordError(e.target.value.trim()===\"\");}function handleLogin(e){e.preventDefault();if(!usernameError&&!passwordError){console.log(credentials);login();if(!err){localStorage.setItem(\"token\",res.token);headerCallback(res.position);setLoginError(false);}else{setLoginError(true);}}}return/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\"}),loginError&&/*#__PURE__*/_jsx(\"p\",{children:\"B\\u0142\\u0105d logowania\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Login\",onChange:handleUsername,value:credentials.username}),usernameError&&/*#__PURE__*/_jsx(\"p\",{children:\"Prosz\\u0119 wpisa\\u0107 login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Has\\u0142o\",onChange:handlePassword,value:credentials.password}),passwordError&&/*#__PURE__*/_jsx(\"p\",{children:\"Prosz\\u0119 wpisa\\u0107 has\\u0142o\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",txt:\"Zaloguj\"})]});};export default LoginForm;","map":{"version":3,"sources":["C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/src/components/LoginForm.js"],"names":["useState","Button","usePost","LoginForm","headerCallback","loginError","setLoginError","username","password","credentials","setCredentials","usernameError","setUsernameError","passwordError","setPasswordError","res","login","err","handleUsername","e","target","value","trim","handlePassword","handleLogin","preventDefault","console","log","localStorage","setItem","token","position"],"mappings":"+WAAA,OAAQA,QAAR,KAAuB,OAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,C,wFACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAsB,IAApBC,CAAAA,cAAoB,MAApBA,cAAoB,CAEpC,cAAoCJ,QAAQ,CAAC,KAAD,CAA5C,wCAAOK,UAAP,eAAmBC,aAAnB,eACA,eAAsCN,QAAQ,CAAC,CAC3CO,QAAQ,CAAE,EADiC,CAE3CC,QAAQ,CAAE,EAFiC,CAAD,CAA9C,yCAAOC,WAAP,eAAoBC,cAApB,eAIA,eAA0CV,QAAQ,CAAC,KAAD,CAAlD,yCAAOW,aAAP,eAAsBC,gBAAtB,eACA,eAA0CZ,QAAQ,CAAC,KAAD,CAAlD,yCAAOa,aAAP,eAAsBC,gBAAtB,eACA,aAA0BZ,OAAO,CAAC,OAAD,CAAUO,WAAV,CAAjC,sCAAOM,GAAP,cAAYC,KAAZ,cAAmBC,GAAnB,cAEA,QAASC,CAAAA,cAAT,CAAwBC,CAAxB,CAA2B,CACvBT,cAAc,gCAAKD,WAAL,MAAkBF,QAAQ,CAAEY,CAAC,CAACC,MAAF,CAASC,KAArC,GAAd,CACAT,gBAAgB,CAACO,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,IAAf,KAA0B,EAA3B,CAAhB,CACH,CAED,QAASC,CAAAA,cAAT,CAAwBJ,CAAxB,CAA2B,CACvBT,cAAc,gCAAKD,WAAL,MAAkBD,QAAQ,CAAEW,CAAC,CAACC,MAAF,CAASC,KAArC,GAAd,CACAP,gBAAgB,CAACK,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,IAAf,KAA0B,EAA3B,CAAhB,CACH,CAED,QAASE,CAAAA,WAAT,CAAqBL,CAArB,CAAwB,CAEpBA,CAAC,CAACM,cAAF,GACA,GAAI,CAACd,aAAD,EAAkB,CAACE,aAAvB,CAAsC,CAClCa,OAAO,CAACC,GAAR,CAAYlB,WAAZ,EACAO,KAAK,GACL,GAAI,CAACC,GAAL,CAAU,CACNW,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8Bd,GAAG,CAACe,KAAlC,EACA1B,cAAc,CAACW,GAAG,CAACgB,QAAL,CAAd,CACAzB,aAAa,CAAC,KAAD,CAAb,CACH,CAJD,IAIO,CACHA,aAAa,CAAC,IAAD,CAAb,CACH,CAEJ,CACJ,CAED,mBACI,cAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAEkB,WAAvC,wBACI,YAAK,SAAS,CAAC,MAAf,EADJ,CAEKnB,UAAU,eACP,+CAHR,cAKI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,QAAQ,CAAEa,cAAjD,CAAiE,KAAK,CAAET,WAAW,CAACF,QAApF,EALJ,CAMKI,aAAa,eACV,oDAPR,cASI,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,YAAnC,CAA2C,QAAQ,CAAEY,cAArD,CAAqE,KAAK,CAAEd,WAAW,CAACD,QAAxF,EATJ,CAUKK,aAAa,eACV,yDAXR,cAaI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,GAAG,CAAC,SAA1B,EAbJ,GADJ,CAiBH,CAvDD,CAyDA,cAAeV,CAAAA,SAAf","sourcesContent":["import {useState} from 'react'\r\nimport Button from './Button'\r\nimport usePost from \"../hooks/usePost\"\r\nconst LoginForm = ({headerCallback}) => {\r\n\r\n    const [loginError, setLoginError] = useState(false);\r\n    const [credentials, setCredentials] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    })\r\n    const [usernameError, setUsernameError] = useState(false);    \r\n    const [passwordError, setPasswordError] = useState(false);\r\n    const [res, login, err] = usePost(\"login\", credentials);\r\n\r\n    function handleUsername(e) {\r\n        setCredentials({...credentials, username: e.target.value});\r\n        setUsernameError(e.target.value.trim() === \"\")\r\n    }\r\n    \r\n    function handlePassword(e) {\r\n        setCredentials({...credentials, password: e.target.value});\r\n        setPasswordError(e.target.value.trim() === \"\")\r\n    }\r\n\r\n    function handleLogin(e) {\r\n\r\n        e.preventDefault();\r\n        if (!usernameError && !passwordError) {\r\n            console.log(credentials);\r\n            login();\r\n            if (!err) {\r\n                localStorage.setItem(\"token\", res.token);\r\n                headerCallback(res.position)\r\n                setLoginError(false);\r\n            } else {\r\n                setLoginError(true);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"login-form\" onSubmit={handleLogin}>\r\n            <div className=\"logo\"/>\r\n            {loginError && \r\n                <p>Błąd logowania</p>\r\n                }\r\n            <input type=\"text\" placeholder=\"Login\" onChange={handleUsername} value={credentials.username}/>\r\n            {usernameError && \r\n                <p>Proszę wpisać login</p>\r\n                }\r\n            <input type=\"password\" placeholder=\"Hasło\" onChange={handlePassword} value={credentials.password}/>\r\n            {passwordError && \r\n                <p>Proszę wpisać hasło</p>\r\n                }\r\n            <Button type=\"submit\" txt=\"Zaloguj\"/>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default LoginForm"]},"metadata":{},"sourceType":"module"}