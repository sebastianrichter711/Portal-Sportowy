{"ast":null,"code":"var _jsxFileName = \"C:\\\\Portal-Sportowy\\\\src\\\\backend\\\\portalsport24\\\\sport24\\\\frontsport24\\\\src\\\\components\\\\auth\\\\LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Button from './Button';\nimport usePost from \"../hooks/usePost\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginForm = ({\n  headerCallback\n}) => {\n  _s();\n\n  const [loginError, setLoginError] = useState(false);\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [res, login, err] = usePost(\"login\", credentials);\n\n  function handleUsername(e) {\n    setCredentials({ ...credentials,\n      username: e.target.value\n    });\n    setUsernameError(e.target.value.trim() === \"\");\n  }\n\n  function handlePassword(e) {\n    setCredentials({ ...credentials,\n      password: e.target.value\n    });\n    setPasswordError(e.target.value.trim() === \"\");\n  }\n\n  function handleLogin(e) {\n    e.preventDefault();\n\n    if (!usernameError && !passwordError) {\n      console.log(credentials);\n      login();\n\n      if (!err) {\n        localStorage.setItem(\"token\", res.token);\n        headerCallback(res.position);\n        setLoginError(false);\n      } else {\n        setLoginError(true);\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"login-form\",\n    onSubmit: handleLogin,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), loginError && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"B\\u0142\\u0105d logowania\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Login\",\n      onChange: handleUsername,\n      value: credentials.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), usernameError && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Prosz\\u0119 wpisa\\u0107 login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"Has\\u0142o\",\n      onChange: handlePassword,\n      value: credentials.password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), passwordError && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Prosz\\u0119 wpisa\\u0107 has\\u0142o\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      txt: \"Zaloguj\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LoginForm, \"tdNvzg3bO/mNbE9xgIGDWfHyaMA=\", false, function () {\n  return [usePost];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/src/components/auth/LoginForm.js"],"names":["useState","Button","usePost","LoginForm","headerCallback","loginError","setLoginError","credentials","setCredentials","username","password","usernameError","setUsernameError","passwordError","setPasswordError","res","login","err","handleUsername","e","target","value","trim","handlePassword","handleLogin","preventDefault","console","log","localStorage","setItem","token","position"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport Button from './Button'\r\nimport usePost from \"../hooks/usePost\"\r\nconst LoginForm = ({headerCallback}) => {\r\n\r\n    const [loginError, setLoginError] = useState(false);\r\n    const [credentials, setCredentials] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    })\r\n    const [usernameError, setUsernameError] = useState(false);    \r\n    const [passwordError, setPasswordError] = useState(false);\r\n    const [res, login, err] = usePost(\"login\", credentials);\r\n\r\n    function handleUsername(e) {\r\n        setCredentials({...credentials, username: e.target.value});\r\n        setUsernameError(e.target.value.trim() === \"\")\r\n    }\r\n    \r\n    function handlePassword(e) {\r\n        setCredentials({...credentials, password: e.target.value});\r\n        setPasswordError(e.target.value.trim() === \"\")\r\n    }\r\n\r\n    function handleLogin(e) {\r\n\r\n        e.preventDefault();\r\n        if (!usernameError && !passwordError) {\r\n            console.log(credentials);\r\n            login();\r\n            if (!err) {\r\n                localStorage.setItem(\"token\", res.token);\r\n                headerCallback(res.position)\r\n                setLoginError(false);\r\n            } else {\r\n                setLoginError(true);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"login-form\" onSubmit={handleLogin}>\r\n            <div className=\"logo\"/>\r\n            {loginError && \r\n                <p>Błąd logowania</p>\r\n                }\r\n            <input type=\"text\" placeholder=\"Login\" onChange={handleUsername} value={credentials.username}/>\r\n            {usernameError && \r\n                <p>Proszę wpisać login</p>\r\n                }\r\n            <input type=\"password\" placeholder=\"Hasło\" onChange={handlePassword} value={credentials.password}/>\r\n            {passwordError && \r\n                <p>Proszę wpisać hasło</p>\r\n                }\r\n            <Button type=\"submit\" txt=\"Zaloguj\"/>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default LoginForm"]},"metadata":{},"sourceType":"module"}