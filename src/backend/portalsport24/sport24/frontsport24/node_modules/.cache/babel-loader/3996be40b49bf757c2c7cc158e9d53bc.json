{"ast":null,"code":"import _regeneratorRuntime from\"C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// frontend/src/actions/auth.js\nimport axios from'axios';import{stopSubmit}from'redux-form';import{USER_LOADING,USER_LOADED,AUTH_ERROR,REGISTER_SUCCESS,// added\nREGISTER_FAIL,// added\nLOGIN_SUCCESS,LOGIN_FAIL,LOGOUT_SUCCESS}from'./types';// LOGIN USER\nexport var login=function login(_ref){var username=_ref.username,password=_ref.password;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Headers\nconfig={headers:{'Content-Type':'application/json'}};// Request Body\nbody=JSON.stringify({username:username,password:password});_context.prev=2;_context.next=5;return axios.post('login',body,config);case 5:res=_context.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:LOGIN_FAIL});dispatch(stopSubmit('loginForm',_context.t0.response.data));case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};// helper function\nexport var tokenConfig=function tokenConfig(getState){// Get token\nvar token=getState().auth.token;// Headers\nvar config={headers:{'Content-Type':'application/json'}};if(token){config.headers['Authorization']=\"Token \".concat(token);}return config;};// REGISTER USER\nexport var register=function register(_ref3){var username=_ref3.username,email=_ref3.email,password=_ref3.password;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Headers\nconfig={headers:{'Content-Type':'application/json'}};// Request Body\nbody=JSON.stringify({username:username,email:email,password:password});_context2.prev=2;_context2.next=5;return axios.post('register',body,config);case 5:res=_context2.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:REGISTER_FAIL});dispatch(stopSubmit('registerForm',_context2.t0.response.data));case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Portal-Sportowy/src/backend/portalsport24/sport24/frontsport24/src/actions/auth.js"],"names":["axios","stopSubmit","USER_LOADING","USER_LOADED","AUTH_ERROR","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","login","username","password","dispatch","config","headers","body","JSON","stringify","post","res","type","payload","data","response","tokenConfig","getState","token","auth","register","email"],"mappings":"6WAAA;AAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,YAA3B,CAEA,OACIC,YADJ,CAEIC,WAFJ,CAGIC,UAHJ,CAIIC,gBAJJ,CAIsB;AAClBC,aALJ,CAKmB;AACfC,aANJ,CAOIC,UAPJ,CAQIC,cARJ,KASS,SATT,CAWE;AACF,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,UAAGC,CAAAA,QAAH,MAAGA,QAAH,CAAaC,QAAb,MAAaA,QAAb,iGAA4B,iBAAMC,QAAN,sIAC7C;AACMC,MAFuC,CAE9B,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAF8B,CAQ7C;AACMC,IATuC,CAShCC,IAAI,CAACC,SAAL,CAAe,CAAEP,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAf,CATgC,uCAYzBZ,CAAAA,KAAK,CAACmB,IAAN,CAAW,OAAX,CAAoBH,IAApB,CAA0BF,MAA1B,CAZyB,QAYrCM,GAZqC,eAa3CP,QAAQ,CAAC,CACPQ,IAAI,CAAEd,aADC,CAEPe,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAb2C,+EAkB3CV,QAAQ,CAAC,CACPQ,IAAI,CAAEb,UADC,CAAD,CAAR,CAGAK,QAAQ,CAACZ,UAAU,CAAC,WAAD,CAAc,YAAIuB,QAAJ,CAAaD,IAA3B,CAAX,CAAR,CArB2C,oEAA5B,iEAAd,CAyBL;AACA,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,QAAQ,CAAI,CACrC;AACA,GAAMC,CAAAA,KAAK,CAAGD,QAAQ,GAAGE,IAAX,CAAgBD,KAA9B,CAEA;AACA,GAAMb,CAAAA,MAAM,CAAG,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAAf,CAMA,GAAIY,KAAJ,CAAW,CACTb,MAAM,CAACC,OAAP,CAAe,eAAf,kBAA2CY,KAA3C,EACD,CAED,MAAOb,CAAAA,MAAP,CACD,CAhBM,CAkBP;AACA,MAAO,IAAMe,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,WAAGlB,CAAAA,QAAH,OAAGA,QAAH,CAAamB,KAAb,OAAaA,KAAb,CAAoBlB,QAApB,OAAoBA,QAApB,iGAAmC,kBAAMC,QAAN,0IACzD;AACMC,MAFmD,CAE1C,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAF0C,CAQzD;AACMC,IATmD,CAS5CC,IAAI,CAACC,SAAL,CAAe,CAAEP,QAAQ,CAARA,QAAF,CAAYmB,KAAK,CAALA,KAAZ,CAAmBlB,QAAQ,CAARA,QAAnB,CAAf,CAT4C,yCAYrCZ,CAAAA,KAAK,CAACmB,IAAN,CAAW,UAAX,CAAuBH,IAAvB,CAA6BF,MAA7B,CAZqC,QAYjDM,GAZiD,gBAavDP,QAAQ,CAAC,CACPQ,IAAI,CAAEhB,gBADC,CAEPiB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAbuD,mFAkBvDV,QAAQ,CAAC,CACPQ,IAAI,CAAEf,aADC,CAAD,CAAR,CAGAO,QAAQ,CAACZ,UAAU,CAAC,cAAD,CAAiB,aAAIuB,QAAJ,CAAaD,IAA9B,CAAX,CAAR,CArBuD,sEAAnC,kEAAjB","sourcesContent":["// frontend/src/actions/auth.js\r\n\r\nimport axios from 'axios';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nimport {\r\n    USER_LOADING,\r\n    USER_LOADED,\r\n    AUTH_ERROR,\r\n    REGISTER_SUCCESS, // added\r\n    REGISTER_FAIL, // added\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT_SUCCESS\r\n  } from './types';\r\n  \r\n  // LOGIN USER\r\nexport const login = ({ username, password }) => async dispatch => {\r\n    // Headers\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n  \r\n    // Request Body\r\n    const body = JSON.stringify({ username, password });\r\n  \r\n    try {\r\n      const res = await axios.post('login', body, config);\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: res.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: LOGIN_FAIL\r\n      });\r\n      dispatch(stopSubmit('loginForm', err.response.data));\r\n    }\r\n  };\r\n  \r\n  // helper function\r\n  export const tokenConfig = getState => {\r\n    // Get token\r\n    const token = getState().auth.token;\r\n  \r\n    // Headers\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n  \r\n    if (token) {\r\n      config.headers['Authorization'] = `Token ${token}`;\r\n    }\r\n  \r\n    return config;\r\n  };\r\n\r\n  // REGISTER USER\r\n  export const register = ({ username, email, password }) => async dispatch => {\r\n    // Headers\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n  \r\n    // Request Body\r\n    const body = JSON.stringify({ username, email, password });\r\n  \r\n    try {\r\n      const res = await axios.post('register', body, config);\r\n      dispatch({\r\n        type: REGISTER_SUCCESS,\r\n        payload: res.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: REGISTER_FAIL\r\n      });\r\n      dispatch(stopSubmit('registerForm', err.response.data));\r\n    }\r\n  };"]},"metadata":{},"sourceType":"module"}